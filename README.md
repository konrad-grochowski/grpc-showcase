# grpc-experiment
This project showcases potential strengths of gRPC framework.

## Aim
- Create service `grpc-store`, which stores key-value pairs in memory, and handles storing and loading requests through a gRPC service;
- Create HTTP proxy server `rest-api`, which takes requests to store/load key-value pairs, forwards the requests through gRPC and returns responses to the HTTP client.

## Project components overview
### Services
The following services can be made into Dockercontainers, using the Dockerfiles inside respective directories.
(Note: containers need to be built with root dir context.)
### grpc-store
Contains source code for the `rest-api` HTTP server.
### rest-api
Contains source code for the `grpc-store` gRPC server for in-memory storage of key-value pairs.

## Utilities
### grpc-codegen
Contains Rust library with gRPC related code, generated by `tonic-build` dependency.
The generated code creates gRPC client and server implementations, data models and service traits, all of these being mirrored
by a provided `proto` file, also available in the directory.
This is a dependency to both of the above services.
### tests
Contains test cases for integration tests. Requires running `docker compose` before executing the tests.

## Manual

### Certificates generation
Project requires generation of TLS certificates to work.
To generate certificates, run `make generate_certificates`.
This script performs the following procedure (twice, each for for each service):
- generate private key and certificate signing request (CSR) for the service,
- generate self-signed certificate authority (CA) key,
- sign the CSR with the CA key.

The signing process uses `extfile` containing details regarding signing. 
It's necessary to ensure `rustls` TLS implementation will respect the certificate.

### Running services
To run services, use `make run` This invokes a `docker compose` command.
(Note: requires certs generation beforehand)

### E2E test
To perform E2E test consisting of large numbers of store and load operations, 
run `make e2e_test`.
(Note: requires certs generation beforehand)

